<!doctype html>
<html lang="es">
<head>
<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<title>Hello, world!</title>
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<h1 data-bind="text:hola" >...</h1>	
				
				<input type="text" data-bind="value:hola"/>
			</div>
		</div>	

		<div class="row">
			<div class="col-md-12">
				<ul id="example-1" data-bind="childrenComplete: cargarLista">
					<!-- ko foreach: listado -->
					<li>
						<span data-bind="text: $data.nombre" ></span>						
					</li>
					<!-- /ko -->
				</ul>				
			</div>
		</div>
	
	</div>
</body>

<script src="https://code.jquery.com/jquery-3.3.1.min.js" ></script>    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>
<!-- Firebase App is always required and must be first -->
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-app.js"></script>
<!-- Add additional services that you want to use -->
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-functions.js"></script>
<script>

//var firebase = require("firebase/app");
// Your web app's Firebase configuration
var firebaseConfig = {
	apiKey: "",
	authDomain: "",
	databaseURL: "",
	projectId: "",
	storageBucket: "",
	messagingSenderId: "",
	appId: ""
};	

// Initialize Firebase
firebase.initializeApp(firebaseConfig);

function viewModel() {
    
    var viewModel = this;
    
    viewModel.hola = ko.observable();
	viewModel.listado = ko.observableArray([]);

	viewModel.cargarLista = function(){	
		
		var listado = firebase.database().ref('data/listado');				
		listado.on('value',function(data){
			viewModel.listado([]);		
			data.forEach(function(row){		
				viewModel.listado.push(row.val());				
			})				
		});	
	};	
		
	viewModel.hola.subscribe(function(e){		
		console.log(e);	
	});    
}

ko.applyBindings(new viewModel());
</script>
</html>
